{"version":3,"sources":["module.js","services/PaginatorSettingsService.js","controllers/Paginator.js","components/paginator.js"],"names":["angular","module","PaginatorSettingsService","settings","this","getSettings","provider","setSettings","$get","debounce","lock","debounceDelay","controller","$element","$scope","updateHeaders","$headers","$header","find","$component","remove","append","clone","updateContent","$contentWrapper","$","addClass","$content","children","updateFooters","$footers","$footer","clearView","html","paginateView","ignore","paginate","update","debounceUpdate","clearTimeout","setTimeout","eq","$models","$onInit","on","$emit","component","template","transclude","headers","content","footers","loader"],"mappings":"CAAA,WACAA,QAAAC,OAAA,0CAEAD,QAAAC,OAAA,0CACA,wCAGAD,QAAAC,OAAA,yCACA,2CAGAD,QAAAC,OAAA,8BACA,6CCZA,WACA,GAAAC,GAAA,SAAAC,GACAC,KAAAC,YAAA,WACA,MAAAF,IAIAH,SACAC,OAAA,uCACAK,SAAA,2BAAA,WACA,UAEA,IAAAA,GAAAF,IAEAE,GAAAH,YAEAG,EAAAC,YAAA,SAAAJ,GACAG,EAAAH,SAAAA,GAGAG,EAAAE,KAAA,WACA,MAAA,IAAAN,GAAAI,EAAAH,gBCrBA,WACA,GAAAM,GAAA,KACAC,GAAA,EACAC,EAAA,GAEAX,SACAC,OAAA,0CACAW,WAAA,iBAAA,WAAA,SAAA,2BAAA,SACAC,EACAC,EACAZ,GAEA,UASA,SAAAa,KACA,GAAAC,GAAAC,EAAAC,KAAA,UAIAC,GAAAD,KAAA,WAAAE,SACAD,EAAAE,OAAAL,EAAAM,OAAA,IAGA,QAAAC,KACA,GAAAC,GAAAC,EAAA,QAIAD,GAAAE,SAAA,WAAAL,OAAAM,EAAAC,YACAT,EAAAD,KAAA,YAAAE,SACAD,EAAAE,OAAAG,GAGA,QAAAK,KACA,GAAAC,GAAAC,EAAAb,KAAA,UAIAC,GAAAD,KAAA,WAAAE,SACAD,EAAAE,OAAAS,EAAAR,OAAA,IAGA,QAAAU,KACAb,EAAAc,KAAA,IAGA,QAAAC,KACA,GAAA/B,GAAAD,EAAAG,aAEAF,GAAAgC,QACA,oBAGAhB,EAAAiB,SAAAjC,GAGA,QAAAkC,KACA3B,GAAA,EACAsB,IACAjB,IACAQ,IACAM,IACAK,IACAxB,GAAA,EAGA,QAAA4B,KACA5B,IAIAD,GACA8B,aAAA9B,GAGAA,EAAA+B,WAAA,WACAH,KACA1B,IAtEA,GAAAQ,GAAAN,EAAAe,WAAAa,GAAA,GACAC,EAAA7B,EAAAe,WAAAa,GAAA,GAEAxB,EAAAyB,EAAAd,WAAAa,GAAA,GACAd,EAAAe,EAAAd,WAAAa,GAAA,GACAV,EAAAW,EAAAd,WAAAa,GAAA,EAoEArC,MAAAuC,QAAA,WAOA9B,EAAAa,SAAA,qBAEAP,EAAAyB,GAAA,6BAAA,WACA9B,EAAA+B,MAAA,gCAGA1B,EAAAyB,GAAA,2BAAA,WACA9B,EAAA+B,MAAA,8BAGA5B,EAAA2B,GAAA,qBAAA,WACAN,MAGAX,EAAAiB,GAAA,qBAAA,WACAN,MAGAP,EAAAa,GAAA,qBAAA,WACAN,aCjHA,WACAtC,QACAC,OAAA,yCACA6C,UAAA,kBACAC,SAAA,WACA,MAAA,sQAUAC,YACAC,QAAA,oBACAC,QAAA,wBACAC,QAAA,oBACAC,OAAA,yBAEAxC,WAAA","file":"angular-paginator.min.js","sourcesContent":["(function () {\n    angular.module('theoryofnekomata.paginator.services', []);\n\n    angular.module('theoryofnekomata.paginator.controllers', [\n        'theoryofnekomata.paginator.services'\n    ]);\n\n    angular.module('theoryofnekomata.paginator.components', [\n        'theoryofnekomata.paginator.controllers'\n    ]);\n\n    angular.module('theoryofnekomata.paginator', [\n        'theoryofnekomata.paginator.components'\n    ]);\n})();\n","(function () {\n    var PaginatorSettingsService = function PaginatorSettingsService(settings) {\n        this.getSettings = function getSettings() {\n            return settings;\n        };\n    };\n\n    angular\n        .module('theoryofnekomata.paginator.services')\n        .provider('PaginatorSettingsService', function PaginatorSettingsServiceProvider() {\n            \"ngInject\";\n\n            var provider = this;\n\n            provider.settings = {};\n\n            provider.setSettings = function setSettings(settings) {\n                provider.settings = settings;\n            };\n\n            provider.$get = function PaginatorSettingsServiceFactory() {\n                return new PaginatorSettingsService(provider.settings);\n            };\n        });\n})();\n","(function () {\n    var debounce = null,\n        lock = false,\n        debounceDelay = 250;\n\n    angular\n        .module('theoryofnekomata.paginator.controllers')\n        .controller('PaginatorCtrl', function PaginatorCtrl(\n            $element,\n            $scope,\n            PaginatorSettingsService\n        ) {\n            \"ngInject\";\n\n            var $component = $element.children().eq(0),\n                $models = $element.children().eq(1),\n\n                $header = $models.children().eq(0),\n                $content = $models.children().eq(1),\n                $footer = $models.children().eq(2);\n\n            function updateHeaders() {\n                var $headers = $header.find('.header');\n\n                //$headers = $headers.clone(true, true);\n\n                $component.find('.header').remove();\n                $component.append($headers.clone(true));\n            }\n\n            function updateContent() {\n                var $contentWrapper = $('<div>');\n\n                //$contentEl = $contentEl.clone(true, true);\n\n                $contentWrapper.addClass('content').append($content.children());\n                $component.find('.content').remove();\n                $component.append($contentWrapper);\n            }\n\n            function updateFooters() {\n                var $footers = $footer.find('.footer');\n\n                //$footers = $footers.clone(true, true);\n\n                $component.find('.footer').remove();\n                $component.append($footers.clone(true));\n            }\n\n            function clearView() {\n                $component.html('');\n            }\n\n            function paginateView() {\n                var settings = PaginatorSettingsService.getSettings();\n\n                settings.ignore = [\n                    '[data-ng-repeat]'\n                ];\n\n                $component.paginate(settings);\n            }\n\n            function update() {\n                lock = true;\n                clearView();\n                updateHeaders();\n                updateContent();\n                updateFooters();\n                paginateView();\n                lock = false;\n            }\n\n            function debounceUpdate() {\n                if (!!lock) {\n                    return;\n                }\n\n                if (!!debounce) {\n                    clearTimeout(debounce);\n                }\n\n                debounce = setTimeout(function () {\n                    update();\n                }, debounceDelay);\n            }\n\n            this.$onInit = function () {\n                //var observer = new MutationObserver(update);\n                //\n                //observer.observe($header[0], { childList: true, attributes: true, characterData: true, subtree: true });\n                //observer.observe($content[0], { childList: true, attributes: true, characterData: true, subtree: true });\n                //observer.observe($footer[0], { childList: true, attributes: true, characterData: true, subtree: true });\n\n                $element.addClass('paginator-wrapper');\n\n                $component.on('paginator.modelchangestart', function () {\n                    $scope.$emit('paginator.modelchangestart');\n                });\n\n                $component.on('paginator.modelchangeend', function () {\n                    $scope.$emit('paginator.modelchangeend');\n                });\n\n                $header.on('DOMSubtreeModified', function () {\n                    debounceUpdate();\n                });\n\n                $content.on('DOMSubtreeModified', function () {\n                    debounceUpdate();\n                });\n\n                $footer.on('DOMSubtreeModified', function () {\n                    debounceUpdate();\n                });\n            };\n        });\n})();\n","(function () {\n    angular\n        .module('theoryofnekomata.paginator.components')\n        .component('tmtknPaginator', {\n            template: function () {\n                return (\n                    '<div class=\"paginator-component\"></div>' +\n                    '<div class=\"paginator-model\">' +\n                        '<div data-ng-transclude=\"headers\"></div>' +\n                        '<div data-ng-transclude=\"content\"></div>' +\n                        '<div data-ng-transclude=\"footers\"></div>' +\n                    '</div>' +\n                    '<div class=\"paginator-loader\" data-ng-transclude=\"loader\"></div>'\n                );\n            },\n            transclude: {\n                headers: '?tmtknPageHeaders',\n                content: 'tmtknPaginatorContent',\n                footers: '?tmtknPageFooters',\n                loader: '?tmtknPaginatorLoader'\n            },\n            controller: 'PaginatorCtrl'\n        });\n})();\n"]}